---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

// Format date like "Jan 8, 2022"
const formatDate = (date: Date) => {
	return date.toLocaleDateString('en-US', {
		year: 'numeric',
		month: 'short',
		day: 'numeric',
	});
};
---

<BaseLayout title={`Archives | ${SITE_TITLE}`} description={SITE_DESCRIPTION}>
	<h2 class="archive-heading text-center w-1/2 mx-auto mb-8">All Posts</h2>
	<ul class="p-0">
		{posts.map((post) => (
			<li class="list-none mb-6">
				<a href={`/blog/${post.id}/`} class="hover:text-red-600">
					<div class="font-sans text-sm">{post.data.title}</div>
					<div class="font-sans text-sm text-muted">{formatDate(post.data.pubDate)}</div>
				</a>
			</li>
		))}
	</ul>
</BaseLayout>
